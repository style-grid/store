<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Smart Post Generator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #e9ecef; padding: 20px; }
        .container { max-width: 700px; margin: 0 auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: #2c3e50; margin-bottom: 25px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 6px; font-weight: 600; color: #34495e; font-size: 14px; }
        input, textarea { width: 100%; padding: 12px; border: 1px solid #ced4da; border-radius: 6px; font-size: 14px; transition: 0.3s; box-sizing: border-box; }
        input:focus, textarea:focus { border-color: #1da1f2; outline: none; box-shadow: 0 0 5px rgba(29, 161, 242, 0.3); }
        textarea { height: 100px; resize: vertical; }
        
        /* আইডি ফিল্ডের স্পেশাল স্টাইল */
        #generatedId { 
            background-color: #f1f8ff; 
            border-color: #1da1f2; 
            color: #0c5460; 
            font-weight: bold; 
            font-family: monospace;
        }
        
        .row { display: flex; gap: 15px; }
        .col { flex: 1; }
        
        button {
            width: 100%; padding: 14px; background: #1da1f2; color: white; border: none; 
            border-radius: 6px; font-size: 16px; font-weight: bold; cursor: pointer; margin-top: 15px;
            transition: background 0.3s;
        }
        button:hover { background: #0d8bd9; }

        .output-area { margin-top: 30px; position: relative; display: none; }
        pre { background: #282c34; color: #61dafb; padding: 20px; border-radius: 8px; overflow-x: auto; white-space: pre-wrap; font-family: 'Courier New', monospace; font-size: 13px; }
        .copy-btn { position: absolute; top: 10px; right: 10px; background: #fff; color: #333; padding: 6px 12px; font-size: 12px; border: none; cursor: pointer; border-radius: 4px; font-weight: bold; }
        .copy-btn:hover { background: #f0f0f0; }
    </style>
</head>
<body>

<div class="container">
    <h2><i class="fa-solid fa-wand-magic-sparkles"></i> Post Generator</h2>
    
    <div class="form-group">
        <label>Post Title (Bangla/English)</label>
        <input type="text" id="title" placeholder="Ex: তানিয়া ভাবীর ভাইরাল ভিডিও..." oninput="generateSmartSlug()">
    </div>

    <div class="form-group">
        <label>Link ID (Auto Generated & Editable)</label>
        <!-- এটি এডিটেবল, যদি অটোমেটিকটা পছন্দ না হয় নিজেই ঠিক করতে পারবেন -->
        <input type="text" id="generatedId" placeholder="tania-bhabir-viral-video">
        <small style="color: #666; font-size: 12px;">This will be the URL link. You can edit it manually.</small>
    </div>

    <div class="row">
        <div class="col form-group">
            <label>Upload Date</label>
            <input type="datetime-local" id="uploadTime">
        </div>
        <div class="col form-group">
            <label>Video Duration</label>
            <input type="text" id="duration" placeholder="00:10:00" value="00:05:00">
        </div>
    </div>

    <div class="row">
        <div class="col form-group">
            <label>Profile Image URL</label>
            <input type="text" id="pfp" value="https://images.unsplash.com/photo-1614680376593-902f74cf0d41?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&q=80">
        </div>
        <div class="col form-group">
            <label>Thumbnail URL</label>
            <input type="text" id="media" value="https://images.unsplash.com/photo-1611162617474-5b21e879e113?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80">
        </div>
    </div>

    <div class="form-group">
        <label>Paragraphs (Enter gives new para)</label>
        <textarea id="paragraphs" placeholder="First paragraph...&#10;Second paragraph..."></textarea>
    </div>

    <div class="row">
        <div class="col form-group">
            <label>Download Link 1</label>
            <input type="text" id="link1" placeholder="Link for button 1">
        </div>
        <div class="col form-group">
            <label>Download Link 2</label>
            <input type="text" id="link2" placeholder="Link for button 2 (optional)">
        </div>
    </div>

    <div class="form-group">
        <label>Hashtags</label>
        <input type="text" id="hashtags" value="#viral #trending #video_2025">
    </div>

    <button onclick="generateJSON()">Generate Code</button>

    <div class="output-area" id="output-box">
        <button class="copy-btn" onclick="copyCode()">Copy</button>
        <pre id="json-output"></pre>
    </div>
</div>

<script>
    // ১. বাংলা টু ইংলিশ কনভার্টার
    const banglaToEnglishMap = {
        'অ': 'o', 'আ': 'a', 'ই': 'i', 'ঈ': 'ee', 'উ': 'u', 'ঊ': 'u', 'ঋ': 'ri', 'এ': 'e', 'ঐ': 'oi', 'ও': 'o', 'ঔ': 'ou',
        'ক': 'k', 'খ': 'kh', 'গ': 'g', 'ঘ': 'gh', 'ঙ': 'ng', 'চ': 'ch', 'ছ': 'chh', 'জ': 'j', 'ঝ': 'jh', 'ঞ': 'n',
        'ট': 't', 'ঠ': 'th', 'ড': 'd', 'ঢ': 'dh', 'ণ': 'n', 'ত': 't', 'থ': 'th', 'দ': 'd', 'ধ': 'dh', 'ন': 'n',
        'প': 'p', 'ফ': 'f', 'ব': 'b', 'ভ': 'v', 'ম': 'm', 'য': 'y', 'র': 'r', 'ল': 'l', 'শ': 'sh', 'ষ': 'sh', 'স': 's', 'হ': 'h',
        'ড়': 'r', 'ঢ়': 'rh', 'য়': 'y', 'ৎ': 't', 'ং': 'ng', 'ঃ': 'h', 'ঁ': 'n', 'া': 'a', 'ি': 'i', 'ী': 'ee', 'ু': 'u', 'ূ': 'u', 'ৃ': 'ri', 'ে': 'e', 'ৈ': 'oi', 'ো': 'o', 'ৌ': 'ou', '্': '', 'ৗ': 'ou'
    };

    function transliterate(text) {
        return text.split('').map(char => banglaToEnglishMap[char] || char).join('');
    }

    // ২. স্মার্ট লিংক জেনারেটর লজিক
    function generateSmartSlug() {
        let title = document.getElementById('title').value;
        
        // বাংলা থেকে ইংলিশ
        let englishTitle = transliterate(title);
        
        // ক্লিন করা এবং অ্যারে বানানো
        let words = englishTitle.toLowerCase()
            .replace(/[^a-z0-9\s]/g, '') // স্পেশাল ক্যারেক্টার রিমুভ (হাইফেন বাদে)
            .split(/\s+/)
            .filter(w => w.length > 0); // খালি স্পেস বাদ

        // প্রথম ৩টি শব্দ নেওয়া
        let selectedWords = words.slice(0, 3);

        // ডুপ্লিকেট শব্দ বাদ দেওয়া (viral, video, link যদি টাইটেলে থাকে তবে বাদ)
        // কারণ আমরা শেষে অটোমেটিক -viral-video যোগ করব
        let filteredWords = selectedWords.filter(w => w !== 'viral' && w !== 'video' && w !== 'link' && w !== 'bhairal');

        // যদি সব শব্দই বাদ পড়ে যায় (যেমন টাইটেল শুধু "Viral Video"), তবে অন্তত একটি শব্দ রাখা
        if (filteredWords.length === 0 && selectedWords.length > 0) {
            filteredWords = [selectedWords[0]];
        }

        // জোড়া লাগানো
        let slug = filteredWords.join('-');

        // শেষে সাফিক্স যোগ করা
        if(slug) {
            slug += "-viral-video";
        }

        // ইনপুট বক্সে দেখানো
        document.getElementById('generatedId').value = slug;
    }

    function generateJSON() {
        // আইডি আমরা ইনপুট বক্স থেকে নিব (কারণ ইউজার এডিট করতে পারে)
        const id = document.getElementById('generatedId').value;
        const title = document.getElementById('title').value;
        const uploadTime = document.getElementById('uploadTime').value || new Date().toISOString().slice(0, 19);
        const duration = document.getElementById('duration').value;
        const pfp = document.getElementById('pfp').value;
        const media = document.getElementById('media').value;
        const paraText = document.getElementById('paragraphs').value;
        const paragraphs = paraText.split('\n').filter(p => p.trim() !== "");
        const link1 = document.getElementById('link1').value;
        const link2 = document.getElementById('link2').value;
        const hashtags = document.getElementById('hashtags').value;

        const postObj = {
            id: id,
            uploadTime: uploadTime,
            title: title,
            profileImage: pfp,
            mediaImage: media,
            paragraphs: paragraphs,
            hashtags: hashtags,
            downloadLink1: link1,
            videoDuration: duration
        };

        if (link2) postObj.downloadLink2 = link2;

        const jsonString = JSON.stringify(postObj, null, 2);
        document.getElementById('json-output').innerText = ",\n" + jsonString;
        document.getElementById('output-box').style.display = 'block';
    }

    function copyCode() {
        const code = document.getElementById('json-output').innerText;
        navigator.clipboard.writeText(code);
        alert("Code Copied!");
    }
</script>

</body>
</html>
