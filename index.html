<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Style Grid - Curated Luxury Fashion</title>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />

    <style>
    :root{
        --font-primary: 'Inter', sans-serif;
        --font-serif: 'Playfair Display', serif;
        --bg-primary: #FFFFFF;
        --bg-secondary: #F0F0F0;
        --text-primary: #111111;
        --text-secondary: #555555;
        --accent-color: #6A0DAD;
        --accent-light: #9370DB;
        --card-bg: #FFFFFF;
        --card-shadow: 0 5px 15px rgba(0,0,0,0.08);
        --header-bg: #FFFFFF;
        --header-text: #111111;
        --price-original-color: #999999;
        --rating-bg: var(--accent-color);
        --rating-text: #FFFFFF;
        --cat-border: #E0E0E0;
    }
    body.dark-mode {
        --bg-primary: #1E1E1E;
        --bg-secondary: #121212;
        --text-primary: #EAEAEA;
        --text-secondary: #AAAAAA;
        --accent-color: #BB86FC;
        --accent-light: #D5B8FF;
        --card-bg: #2C2C2C;
        --card-shadow: 0 6px 20px rgba(0,0,0,0.6);
        --header-bg: #000000;
        --header-text: #EAEAEA;
        --price-original-color: #AAAAAA;
        --rating-bg: var(--accent-color);
        --rating-text: #111111;
        --cat-border: #333333;
    }

    *, *::before, *::after { box-sizing: border-box; }
    html,body{ height:100%; }
    body{
        font-family: var(--font-primary);
        background-color: var(--bg-secondary);
        color: var(--text-primary);
        margin:0; padding:0;
        display:flex; flex-direction:column;
        transition: background-color .35s, color .35s;
        -webkit-font-smoothing:antialiased;
        -moz-osx-font-smoothing:grayscale;
        overflow-x: hidden; /* গ্লোবাল ওভারফ্লো ফিক্স */
    }

    /* Header */
    .sticky-header-top {
        position: sticky; top:0; z-index:1000;
        background-color: var(--header-bg);
        box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    .header{
        max-width:1400px; margin:0 auto; width:100%;
        padding:16px 20px; display:flex; justify-content:space-between; align-items:center;
    }
    
    /* HERO / ANNOUNCEMENT FIXES */
    .slider-section{
        padding:18px 0 28px; background:var(--bg-primary); border-bottom:1px solid var(--cat-border);
    }
    .slider-section .announcement{
        max-width:1400px; margin:0 auto 12px; padding:8px 15px; text-align:center; font-weight:600;
        color:#fff; background: linear-gradient(90deg, var(--accent-color), var(--accent-light)); border-radius:8px;
        /* ফিক্স: টেক্সট এক লাইনে রাখার জন্য */
        white-space: nowrap; 
        overflow: hidden;
        text-overflow: ellipsis;
        font-size: 14px; /* ডেস্কটপ ভিউতে একটু বড় */
    }
    .slider-container{ 
        max-width:1400px; margin:0 auto; border-radius:12px; overflow:hidden; 
        /* ফিক্স: স্লাইডারের হাইট কমানো হলো */
        aspect-ratio: 16/7; 
        box-shadow:0 6px 22px rgba(0,0,0,0.08); background: #fafafa; 
    }
    
    /* ফিক্স: স্লাইডার টাইটেল ও টেক্সট সাইজ বড় করা */
    .slider-item-content {
        position:absolute; left:20px; bottom:26px; color:#fff; font-family:var(--font-serif);
    }
    .slider-item-content h3 { 
        margin:0; 
        font-size:32px !important; /* সাইজ বাড়ানো */
        font-weight: 700;
    }
    .slider-item-content p {
        margin:6px 0 0;
        font-size:18px !important; /* সাইজ বাড়ানো */
        font-weight: 500;
    }

    /* Category Fixes */
    .category-bar-wrapper{ padding:26px 0; background:var(--bg-primary); }
    /* ফিক্স: মূল ক্যাটাগরি কন্টেইনার ওভারফ্লো ফিক্স এবং ফুল উইডথ */
    .category-bar{ 
        max-width:1400px; 
        margin:0 auto; 
        padding:6px 12px; 
        display:flex; 
        gap:12px; 
        align-items:center; 
        overflow:hidden; 
    }
    /* ফিক্স: Inner slider container কে স্লাইড করার অনুমতি দেওয়া হলো */
    #category-bar-male, #category-bar-female {
        display:flex; gap:12px; align-items:center; 
        /* এই অংশটি এখন স্লাইড করতে পারবে */
        overflow-x: auto !important; 
        -webkit-overflow-scrolling: touch; 
        scrollbar-width: none; /* Firefox */
    }
    /* Hide scrollbar for Webkit browsers */
    #category-bar-male::-webkit-scrollbar, #category-bar-female::-webkit-scrollbar {
        display: none;
    }
    .cat-title-card{
        background-color: var(--accent-color);
        color: #fff; border-radius:8px; padding:14px 12px; width:140px; flex-shrink:0;
    }
    .cat-item{ 
        display:flex; flex-direction:column; gap:8px; align-items:center; 
        width:90px; /* ফিক্স: ক্যাটাগরি আইটেমের সাইজ ছোট করা */
        flex-shrink: 0; /* স্লাইড করার জন্য অপরিহার্য */
        text-align:center; 
    }
    .cat-image-container{ 
        width:70px; height:70px; /* ফিক্স: ক্যাটাগরি ইমেজের সাইজ ছোট করা */
        border-radius:50%; /* গোল করার জন্য */
        overflow:hidden; border:3px solid var(--cat-border); display:flex; align-items:center; justify-content:center; background: #fff; 
    }
    
    /* PRODUCT GRID FIXES */
    .container{
        max-width:1400px; margin:0 auto; padding:12px; display:grid;
        /* ফিক্স: ডেক্সটপ ভিউতে ৩টি কার্ড */
        grid-template-columns: repeat(3, 1fr); 
        gap:24px;
    }
    
    /* CARD FIXES */
    .product-info{ 
        padding:14px 16px 18px; background:transparent; display:flex; 
        flex-direction:column; gap:8px; 
        min-height:110px; 
    }
    .product-title{
        font-size:16px; font-weight:600; color:var(--text-primary); margin:0;
        line-height:1.25; height:45px; overflow:hidden; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical;
    }
    .product-price{ 
        display:flex; align-items:center; 
        /* ফিক্স: ওভারফ্লো এড়াতে flex-wrap ব্যবহার করা হলো */
        flex-wrap: wrap; 
        gap:8px; /* গ্যাপ কমানো হলো */
        margin-top:auto; 
    }
    .price-current{ font-weight:800; font-size:18px; }
    .price-original{ font-size:14px; }
    .price-discount-tag{ padding:3px 6px; font-size:11px; }

    /* Responsive */
    @media (max-width: 1200px) { 
        .container{ grid-template-columns: repeat(3,1fr); } 
    }
    @media (max-width: 992px) { 
        .container{ grid-template-columns: repeat(2,1fr); gap:18px; } 
    }
    /* মোবাইল ভিউ ফিক্স */
    @media (max-width: 767px) {
        /* Announcement ফিক্স (মোবাইলে এক লাইনে) */
        .slider-section .announcement{ font-size: 12px; padding: 6px 10px; }
        
        /* স্লাইডার হাইট ফিক্স */
        .slider-container{ aspect-ratio: 4/3; border-radius:8px; }

        /* স্লাইডার টাইটেল ছোট করা */
        .slider-item-content { left: 15px; bottom: 15px; }
        .slider-item-content h3 { font-size: 24px !important; }
        .slider-item-content p { font-size: 15px !important; }

        /* ক্যাটাগরি ফিক্স (সবকিছু এক লাইনে, ছোট) */
        .category-bar{ padding: 6px 0; }
        .cat-title-card{ width: 100px; padding: 10px 8px; margin-right: 10px; }
        .cat-title-card h3{ font-size: 12px; line-height: 1.1; }
        .cat-item{ width: 70px; gap: 4px; }
        .cat-image-container{ width: 60px; height: 60px; }
        .category-name{ font-size: 11px !important; }
        
        /* গ্রিড ফিক্স */
        .container{ grid-template-columns: 1fr 1fr; gap:12px; padding:8px; }
        
        /* কার্ড ওভারফ্লো ফিক্স */
        .product-info{ padding: 10px; min-height: 90px; }
        .product-title{ font-size: 14px; height: 35px; }
        .product-price{ 
            gap: 4px; 
            flex-direction: row; /* এক লাইনে নিশ্চিত করা হলো */
        }
        .price-current{ font-size: 16px; }
        .price-original{ font-size: 12px; }
        .price-discount-tag{ font-size: 10px; padding: 2px 4px; }
    }
    
    </style>
</head>
<body>
    <div class="sticky-header-top">
        <header class="header">
            <a href="index.html" class="header-left">
                <div class="website-icon"><i class="fas fa-gem"></i></div>
                <div class="website-name"><span class="name-part-1">LUXE</span><span class="name-part-2">GRID</span></div>
            </a>
            <div class="header-right">
                <button class="mode-toggle-btn" id="mode-toggle-btn" aria-label="Toggle color mode"><i class="fas fa-moon"></i></button>
                <a href="#" class="social-icon" data-social="facebook"><i class="fab fa-facebook-f"></i></a>
                <a href="#" class="social-icon" data-social="instagram"><i class="fab fa-instagram"></i></a>
                <a href="#" class="social-icon" data-social="pinterest"><i class="fab fa-pinterest-p"></i></a>
            </div>
        </header>
    </div>

    <main>
        <section class="slider-section">
            <div class="announcement">
                <i class="fas fa-shield-alt"></i> US/CA Verified: Free Returns & 2-Day Shipping on Selected Items
            </div>
            <div class="swiper-container slider-container" id="hero-slider">
                <div class="swiper-wrapper" id="hero-slider-wrapper">
                    </div>
            </div>
        </section>

        <section class="category-bar-wrapper">
            <div class="category-bar">
                <div class="cat-title-card"><i class="fas fa-male"></i><h3>MEN'S<br>CURATED</h3></div>
                <div id="category-bar-male" style="display:flex; gap:12px; align-items:center; overflow-x: auto;"></div>
            </div>
            <div class="category-bar" style="margin-top:12px;">
                <div class="cat-title-card" style="background:#E91E63;"><i class="fas fa-female"></i><h3>WOMEN'S<br>COLLECTION</h3></div>
                <div id="category-bar-female" style="display:flex; gap:12px; align-items:center; overflow-x: auto;"></div>
            </div>
        </section>

        <section id="home-view">
            <h2 class="product-grid-title">Top Curated Picks</h2>
            <div class="container" id="trending-cards-container">
                </div>
        </section>
    </main>

    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script>
    // === Preserve your original linking and data structure ===
    const SOCIAL_LINKS = {
        facebook: "https://facebook.com/your-page-url",
        instagram: "https://instagram.com/your-username",
        pinterest: "https://pinterest.com/your-username",
        whatsapp: "https://wa.me/8801234567890"
    };

    const CATEGORIES = {
        'Men': {
            'm-shirts': "T-Shirts & Polos",
            'm-pants': "Jeans & Pants",
            'm-outer': "Outerwear",
            'm-shoes': "Shoes",
            'm-acc': "Accessories"
        },
        'Women': {
            'f-dresses': "Dresses",
            'f-tops': "Tops & Blouses",
            'f-bottoms': "Jeans & Leggings",
            'f-active': "Activewear",
            'f-jewelry': "Jewelry & Bags"
        }
    };

    let currentMode = localStorage.getItem('mode') || 'light';

    async function fetchAllProducts() {
        // Safe fallback data
        return [
            { id: 'ph1', title: 'Luxury Leather Wallet with Card Slots', price: '1299.00', images: ['https://i.ibb.co/3d9vJmK/placeholder-1.png'], rating: '4.7', reviews: '1200', category: 'm-acc', timestamp: Date.now() },
            { id: 'ph2', title: 'Elegant Floral Print Maxi Dress', price: '4500.00', images: ['https://i.ibb.co/3d9vJmK/placeholder-2.png'], rating: '4.9', reviews: '875', category: 'f-dresses', timestamp: Date.now() },
            { id: 'ph3', title: 'Men\'s Casual Linen Shirt', price: '799.00', images: ['https://i.ibb.co/3d9vJmK/placeholder-3.png'], rating: '4.5', reviews: '250', category: 'm-shirts', timestamp: Date.now() },
            { id: 'ph4', title: 'Slim Fit Dark Wash Denim Jeans', price: '1999.00', images: ['https://i.ibb.co/3d9vJmK/placeholder-4.png'], rating: '4.6', reviews: '1500', category: 'm-pants', timestamp: Date.now() },
            { id: 'ph5', title: 'Women\'s Stylish Knit Top', price: '899.00', images: ['https://i.ibb.co/3d9vJmK/placeholder-5.png'], rating: '4.4', reviews: '320', category: 'f-tops', timestamp: Date.now() },
            { id: 'ph6', title: 'Winter Padded Jacket', price: '3200.00', images: ['https://i.ibb.co/3d9vJmK/placeholder-6.png'], rating: '4.8', reviews: '900', category: 'm-outer', timestamp: Date.now() },
            { id: 'ph7', title: 'High-Waist Leggings for Activewear', price: '699.00', images: ['https://i.ibb.co/3d9vJmK/placeholder-7.png'], rating: '4.7', reviews: '450', category: 'f-active', timestamp: Date.now() },
            { id: 'ph8', title: 'Classic Leather Loafers', price: '2800.00', images: ['https://i.ibb.co/3d9vJmK/placeholder-8.png'], rating: '4.6', reviews: '600', category: 'm-shoes', timestamp: Date.now() }
        ];
    }

    function renderHeroSlider(allProducts) {
        const latestProducts = [];
        const allCategoryGroups = {...CATEGORIES.Men, ...CATEGORIES.Women};
        for (const catId in allCategoryGroups) {
            const productsInCategory = allProducts.filter(p => p.category === catId);
            if (productsInCategory.length > 0) {
                const latest = productsInCategory.sort((a,b) => new Date(b.timestamp) - new Date(a.timestamp))[0];
                latestProducts.push(latest);
            }
        }
        const sliderWrapper = document.getElementById('hero-slider-wrapper');
        if (!sliderWrapper) return;
        
        // ফিক্স: স্লাইডার কন্টেন্ট রেন্ডারিং এ ক্লাস ব্যবহার করা হলো
        sliderWrapper.innerHTML = latestProducts.map(product => `
            <a href="deal.html#${product.id}" class="swiper-slide slider-item" style="display:block; color:inherit; position:relative;">
                <img src="${product.images[0]}" alt="${product.title}" style="width:100%; height:100%; object-fit:cover; display:block;">
                <div class="slider-item-content">
                    <h3 style="font-size:32px;">${product.title}</h3>
                    <p style="font-size:18px;"> <i class="fas fa-star" style="color:#FFD700"></i> ${product.rating} | $${product.price} </p>
                </div>
            </a>
        `).join('');
        
        new Swiper('#hero-slider', { loop: true, autoplay: { delay: 4000, disableOnInteraction: false }, speed: 800 });
    }

    function renderCategoryBars(allProducts) {
        const maleBar = document.querySelector('#category-bar-male');
        const femaleBar = document.querySelector('#category-bar-female');
        if(!maleBar || !femaleBar) return;

        let maleHtml = '';
        for(const catId in CATEGORIES.Men){
            const productsInCategory = allProducts.filter(p => p.category === catId);
            if(productsInCategory.length > 0){
                const latestProduct = productsInCategory.filter(p => p.images && p.images.length > 0)[0] || productsInCategory[0];
                maleHtml += `
                    <a href="category.html#${catId}" class="cat-item" style="text-decoration:none; color:inherit;">
                        <div class="cat-image-container">
                            <img src="${latestProduct.images[0]}" alt="${CATEGORIES.Men[catId]}" loading="lazy">
                        </div>
                        <span class="category-name" style="font-size:13px; font-weight:700;">${CATEGORIES.Men[catId]}</span>
                    </a>
                `;
            }
        }
        maleBar.innerHTML = maleHtml;

        let femaleHtml = '';
        for(const catId in CATEGORIES.Women){
            const productsInCategory = allProducts.filter(p => p.category === catId);
            if(productsInCategory.length > 0){
                const latestProduct = productsInCategory.filter(p => p.images && p.images.length > 0)[0] || productsInCategory[0];
                femaleHtml += `
                    <a href="category.html#${catId}" class="cat-item" style="text-decoration:none; color:inherit;">
                        <div class="cat-image-container">
                            <img src="${latestProduct.images[0]}" alt="${CATEGORIES.Women[catId]}" loading="lazy">
                        </div>
                        <span class="category-name" style="font-size:13px; font-weight:700;">${CATEGORIES.Women[catId]}</span>
                    </a>
                `;
            }
        }
        femaleBar.innerHTML = femaleHtml;
    }

    function formatReviewCount(reviews){
        if(!reviews) return '';
        const num = parseInt(String(reviews).replace(/,/g,''), 10);
        if(isNaN(num)) return reviews;
        if(num >= 100000) return `${(num/100000).toFixed(1)} Lakh`;
        if(num >= 1000) return `${(num/1000).toFixed(1)}k`;
        return num;
    }

    function renderMostLovedProducts(allProducts){
        const container = document.getElementById('trending-cards-container');
        if(!container) return;
        const shuffled = [...allProducts].sort(() => 0.5 - Math.random());
        const selectedProducts = shuffled.slice(0, 12);

        container.innerHTML = selectedProducts.map(product => {
            const originalPrice = (parseFloat(product.price) * 1.5).toFixed(2);
            const discountPercentage = Math.round(((originalPrice - product.price) / originalPrice) * 100);
            return `
                <a href="deal.html#${product.id}" class="product-card" aria-label="${product.title}">
                    <div class="product-image-wrapper">
                        <img src="${product.images[0]}" alt="${product.title}" class="product-image" loading="lazy">
                        <div class="product-rating">
                            <span>${product.rating}</span>
                            <i class="fas fa-star star-icon"></i>
                            ${product.reviews ? `<span style="font-weight:600; font-size:13px; opacity:0.9;">(${formatReviewCount(product.reviews)})</span>` : ''}
                        </div>
                    </div>
                    <div class="product-info">
                        <h3 class="product-title">${product.title}</h3>
                        <div class="product-price">
                            <span class="price-current">$${product.price}</span>
                            <span class="price-original">$${originalPrice}</span>
                            <span class="price-discount-tag">${discountPercentage}% OFF</span>
                        </div>
                    </div>
                </a>
            `;
        }).join('');
    }

    function setMode(mode){
        const btn = document.getElementById('mode-toggle-btn');
        const icon = btn.querySelector('i');
        document.body.classList.toggle('dark-mode', mode === 'dark');
        if(icon) icon.className = mode === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
        localStorage.setItem('mode', mode);
        currentMode = mode;
    }

    function setupSocialLinks(){
        document.querySelectorAll('.social-icon[data-social]').forEach(iconLink => {
            const platform = iconLink.dataset.social;
            if(SOCIAL_LINKS[platform]){
                iconLink.href = SOCIAL_LINKS[platform];
                iconLink.target = "_blank";
                iconLink.rel = "noopener noreferrer";
            }
        });
    }

    document.addEventListener('DOMContentLoaded', async () => {
        setMode(currentMode);
        setupSocialLinks();
        const modeToggleButton = document.getElementById('mode-toggle-btn');
        if(modeToggleButton){
            modeToggleButton.addEventListener('click', () => {
                const newMode = currentMode === 'light' ? 'dark' : 'light';
                setMode(newMode);
            });
        }

        const allProducts = await fetchAllProducts();
        if(allProducts && allProducts.length > 0){
            renderHeroSlider(allProducts);
            renderCategoryBars(allProducts);
            renderMostLovedProducts(allProducts);
        } else {
            console.log("No products found — placeholders shown for layout testing.");
        }
    });
    </script>
</body>
</html>
